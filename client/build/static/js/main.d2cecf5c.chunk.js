(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(t,e,n){t.exports=n(68)},37:function(t,e,n){},67:function(t,e,n){},68:function(t,e,n){"use strict";n.r(e);var a=n(1),o=n.n(a),s=n(14),c=n.n(s),r=(n(37),n(38),n(7)),i=n(8),l=n(12),u=n(9),h=n(13),d=n(3),p=n(16),m=n.n(p),f=n(15),g=n(69),v=n(73),b=n(70),E=n(71),O=n(72),j=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleChange=function(t){n.setState(Object(f.a)({},t.target.name,t.target.value))},n.handleSubmit=function(t){t.preventDefault();var e=n.props.post.id,a={title:n.state.curTitle,contents:n.state.curContent};n.props.editPost(a,e),n.setState({modal:!1})},n.state={curTitle:n.props.post.title,curContent:n.props.post.contents,modal:!1},n.toggle=n.toggle.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"addFriendDiv"},o.a.createElement(g.a,{color:"primary",onClick:this.toggle},"Edit Post"),o.a.createElement(v.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},o.a.createElement(b.a,{onSubmit:function(e){return t.handleSubmit(e)}},o.a.createElement(E.a,null,o.a.createElement(O.a,{required:!0,onChange:this.handleChange,type:"text",placeholder:"Title",name:"curTitle",value:this.state.curTitle}),o.a.createElement(O.a,{required:!0,onChange:this.handleChange,type:"textarea",placeholder:"Content",name:"curContent",value:this.state.curContent})),o.a.createElement(g.a,null,"Submit"))))}}]),e}(a.Component),C=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleDelete=function(){n.deletePost(n.state.id)},n.deletePost=function(t){m.a.delete("http://localhost:4000/api/posts/".concat(t)).then(function(t){return n.props.aRefresh()}).catch(function(t){return console.log(t.response)}),n.props.aRefresh()},n.state={title:n.props.post.title,contents:n.props.post.contents,id:n.props.post.id},n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"aPost"},o.a.createElement("h2",null,this.state.title),o.a.createElement("p",null,this.state.contents),o.a.createElement("div",{className:"editDelete"},o.a.createElement(j,{post:this.props.post,editPost:this.props.editPost}),o.a.createElement(g.a,{color:"danger",onClick:function(){return t.deletePost(t.props.post.id)}},"DELETE")))}}]),e}(a.Component);function P(t){return o.a.createElement("div",null,t.posts.map(function(e){return o.a.createElement(C,{post:e,key:Number(e.id+Date.now()),aRefresh:t.aRefresh,editPost:t.editPost})}))}var y=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleChange=function(t){n.setState(Object(f.a)({},t.target.name,t.target.value))},n.handleSubmit=function(t){t.preventDefault();var e={title:n.state.curTitle,contents:n.state.curContent};n.props.addPost(e),n.setState({curTitle:"",curContent:"",modal:!1})},n.state={curTitle:"",curContent:"",modal:!1},n.toggle=n.toggle.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"toggle",value:function(){this.setState({modal:!this.state.modal})}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"addFriendDiv"},o.a.createElement(g.a,{color:"primary",onClick:this.toggle},"Add Post"),o.a.createElement(v.a,{isOpen:this.state.modal,toggle:this.toggle,className:this.props.className},o.a.createElement(b.a,{onSubmit:function(e){return t.handleSubmit(e)}},o.a.createElement(E.a,null,o.a.createElement(O.a,{required:!0,onChange:this.handleChange,type:"text",placeholder:"Title",name:"curTitle",value:this.state.curTitle}),o.a.createElement(O.a,{required:!0,onChange:this.handleChange,type:"textarea",placeholder:"Content",name:"curContent",value:this.state.curContent})),o.a.createElement(g.a,null,"Submit"))))}}]),e}(a.Component),S=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).aRefresh=function(){n.getPosts(),console.log("REFRESHED")},n.getPosts=function(){m.a.get("http://localhost:4000/api/posts").then(function(t){n.setState({posts:t.data})}).catch(function(t){return console.log("error fetching")}),console.log("Posts fetched")},n.addPost=function(t){m.a.post("http://localhost:4000/api/posts/",t).then(function(t){return n.aRefresh()}).catch(function(t){return console.log(t)})},n.editPost=function(t,e){m.a.put("http://localhost:4000/api/posts/".concat(e),t).then(function(t){return n.aRefresh()}).catch(function(t){console.log(t)})},n.state={initialized:!1,posts:[]},n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.state.initialized||(this.getPosts(),console.log("posts mount")),this.setState({initialized:!0})}},{key:"componentDidUpdate",value:function(t,e){e.posts.length!==this.state.posts.length?this.getPosts():console.log("empty update")}},{key:"render",value:function(){return console.log(this.state.posts),o.a.createElement("div",null,o.a.createElement(y,{addPost:this.addPost}),o.a.createElement(P,{posts:this.state.posts,aRefresh:this.aRefresh,editPost:this.editPost}))}}]),e}(a.Component),k=(n(67),function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(l.a)(this,Object(u.a)(e).call(this,t))).connectToServer=n.connectToServer.bind(Object(d.a)(Object(d.a)(n))),n}return Object(h.a)(e,t),Object(i.a)(e,[{key:"connectToServer",value:function(){fetch("/")}},{key:"componentDidMount",value:function(){this.connectToServer()}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"Posts"),o.a.createElement(S,null))}}]),e}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[32,1,2]]]);
//# sourceMappingURL=main.d2cecf5c.chunk.js.map